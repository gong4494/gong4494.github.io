<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bluey Memory Snap!</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      font-family:'Nunito',sans-serif;
      background: linear-gradient(135deg, #87CEEB 0%, #B0E2FF 50%, #E0F4FF 100%);
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:24px 16px 40px;
      overflow-x:hidden;
    }

    /* â”€â”€ Header â”€â”€ */
    h1 {
      font-size: clamp(1.8rem,5vw,3rem);
      font-weight:900;
      color:#FFE066;
      text-shadow:3px 3px 0 #c9a800, 0 0 20px rgba(0,0,0,0.15);
      background:#1B6CA8;
      padding:14px 40px;
      border-radius:50px;
      box-shadow:0 7px 0 #0d4a7a, 0 12px 24px rgba(0,0,0,0.2);
      margin-bottom:18px;
      text-align:center;
      animation: titleBounce 2.5s ease-in-out infinite;
    }
    @keyframes titleBounce {
      0%,100% { transform:translateY(0); }
      50%      { transform:translateY(-6px); }
    }

    /* â”€â”€ Stats bar â”€â”€ */
    .stats {
      display:flex;
      gap:16px;
      flex-wrap:wrap;
      justify-content:center;
      margin-bottom:20px;
    }
    .stat-pill {
      background:white;
      border-radius:40px;
      padding:10px 24px;
      font-size:1.05rem;
      font-weight:800;
      color:#1B6CA8;
      box-shadow:0 4px 0 #ccc, 0 6px 14px rgba(0,0,0,0.1);
    }
    .stat-pill span { color:#E8622A; }

    /* â”€â”€ Difficulty â”€â”€ */
    .diff-row {
      display:flex;
      gap:10px;
      margin-bottom:20px;
      flex-wrap:wrap;
      justify-content:center;
    }
    .diff-btn {
      padding:9px 20px;
      border:3px solid #1B6CA8;
      border-radius:30px;
      background:white;
      color:#1B6CA8;
      font-family:'Nunito',sans-serif;
      font-size:0.95rem;
      font-weight:800;
      cursor:pointer;
      transition:background 0.15s, color 0.15s, transform 0.1s;
    }
    .diff-btn:hover  { background:#1B6CA8; color:white; }
    .diff-btn.active { background:#1B6CA8; color:white; }
    .diff-btn:active { transform:scale(0.96); }

    /* â”€â”€ Grid â”€â”€ */
    #grid {
      display:grid;
      gap:12px;
      margin-bottom:24px;
    }

    /* â”€â”€ Card â”€â”€ */
    .card {
      width:90px;
      height:90px;
      perspective:600px;
      cursor:pointer;
    }
    .card-inner {
      width:100%;
      height:100%;
      position:relative;
      transform-style:preserve-3d;
      transition:transform 0.45s cubic-bezier(0.4,0,0.2,1);
      border-radius:16px;
    }
    .card.flipped .card-inner   { transform:rotateY(180deg); }
    .card.matched .card-inner   { transform:rotateY(180deg); }

    .card-front, .card-back {
      position:absolute;
      inset:0;
      border-radius:16px;
      backface-visibility:hidden;
      -webkit-backface-visibility:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Back face â€” Bluey paw design */
    .card-back {
      background:linear-gradient(135deg,#1B6CA8,#2a8fd4);
      box-shadow:0 5px 0 #0d4a7a, 0 8px 16px rgba(0,0,0,0.18);
      font-size:2.2rem;
      user-select:none;
      border:3px solid rgba(255,255,255,0.25);
    }
    .card-back::after {
      content:'ğŸ¾';
      opacity:0.35;
      font-size:2.6rem;
    }

    /* Front face */
    .card-front {
      background:white;
      transform:rotateY(180deg);
      font-size:2.6rem;
      box-shadow:0 5px 0 #ddd, 0 8px 16px rgba(0,0,0,0.12);
      border:3px solid #e8f4ff;
      user-select:none;
    }

    /* Matched cards glow */
    .card.matched .card-front {
      background:linear-gradient(135deg,#d4f5d4,#eaffe8);
      border-color:#6dd46d;
      animation:matchPop 0.4s ease-out;
    }
    @keyframes matchPop {
      0%   { transform:rotateY(180deg) scale(1); }
      50%  { transform:rotateY(180deg) scale(1.18); }
      100% { transform:rotateY(180deg) scale(1); }
    }

    /* Wrong shake */
    .card.wrong .card-inner {
      animation:shake 0.4s ease;
    }
    @keyframes shake {
      0%,100% { transform:rotateY(180deg) translateX(0); }
      20%      { transform:rotateY(180deg) translateX(-6px); }
      40%      { transform:rotateY(180deg) translateX(6px); }
      60%      { transform:rotateY(180deg) translateX(-4px); }
      80%      { transform:rotateY(180deg) translateX(4px); }
    }

    /* â”€â”€ Restart btn â”€â”€ */
    #restart-btn {
      padding:14px 36px;
      background:#E8622A;
      color:white;
      border:none;
      border-radius:50px;
      font-family:'Nunito',sans-serif;
      font-size:1.1rem;
      font-weight:800;
      cursor:pointer;
      box-shadow:0 5px 0 #b04820, 0 8px 20px rgba(0,0,0,0.2);
      transition:transform 0.1s, box-shadow 0.1s;
    }
    #restart-btn:active { transform:translateY(4px); box-shadow:0 1px 0 #b04820; }

    /* â”€â”€ Win overlay â”€â”€ */
    #win-screen {
      display:none;
      position:fixed;
      inset:0;
      background:rgba(27,108,168,0.88);
      z-index:200;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:24px;
      animation:fadeIn 0.4s ease;
    }
    #win-screen.show { display:flex; }
    @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }

    .win-box {
      background:white;
      border-radius:32px;
      padding:40px 48px;
      box-shadow:0 12px 0 rgba(0,0,0,0.25), 0 20px 40px rgba(0,0,0,0.3);
      max-width:420px;
      width:100%;
      animation:popIn 0.5s cubic-bezier(0.34,1.56,0.64,1);
    }
    @keyframes popIn {
      from { transform:scale(0.5); opacity:0; }
      to   { transform:scale(1);   opacity:1; }
    }

    .win-emoji  { font-size:5rem; margin-bottom:12px; }
    .win-title  { font-size:2.4rem; font-weight:900; color:#1B6CA8; margin-bottom:8px; }
    .win-msg    { font-size:1.1rem; color:#555; margin-bottom:6px; }
    .win-stats  { font-size:1.3rem; font-weight:800; color:#E8622A; margin:12px 0 24px; }

    #play-again-btn {
      padding:16px 40px;
      background:#1B6CA8;
      color:white;
      border:none;
      border-radius:50px;
      font-family:'Nunito',sans-serif;
      font-size:1.2rem;
      font-weight:800;
      cursor:pointer;
      box-shadow:0 6px 0 #0d4a7a;
      transition:transform 0.1s, box-shadow 0.1s;
    }
    #play-again-btn:active { transform:translateY(4px); box-shadow:0 2px 0 #0d4a7a; }

    /* Confetti particles */
    .confetti {
      position:fixed;
      width:10px; height:10px;
      border-radius:2px;
      pointer-events:none;
      z-index:199;
      animation:confettiFall linear forwards;
    }
    @keyframes confettiFall {
      0%   { transform:translateY(-20px) rotate(0deg);   opacity:1; }
      100% { transform:translateY(100vh) rotate(720deg); opacity:0; }
    }

    /* Responsive card sizes */
    @media (max-width:520px) {
      .card { width:72px; height:72px; }
      .card-front { font-size:2rem; }
      #grid { gap:9px; }
    }
    @media (max-width:380px) {
      .card { width:60px; height:60px; }
      .card-front { font-size:1.7rem; }
      #grid { gap:7px; }
    }
  </style>
</head>
<body>

  <h1>ğŸ¾ Memory Snap! ğŸ¾</h1>

  <div class="stats">
    <div class="stat-pill">Moves: <span id="moves-count">0</span></div>
    <div class="stat-pill">Matches: <span id="match-count">0</span> / <span id="total-pairs">8</span></div>
    <div class="stat-pill">â± <span id="timer">0:00</span></div>
  </div>

  <div class="diff-row">
    <button class="diff-btn active" onclick="setDifficulty(4,4,this)">Easy (4Ã—4)</button>
    <button class="diff-btn"        onclick="setDifficulty(4,5,this)">Medium (4Ã—5)</button>
    <button class="diff-btn"        onclick="setDifficulty(4,6,this)">Hard (4Ã—6)</button>
  </div>

  <div id="grid"></div>
  <button id="restart-btn" onclick="restartGame()">ğŸ”„ New Game</button>

  <!-- Win screen -->
  <div id="win-screen">
    <div class="win-box">
      <div class="win-emoji">ğŸ‰</div>
      <div class="win-title">You did it!</div>
      <div class="win-msg">Amazing work, Audrey! ğŸ¾</div>
      <div class="win-stats" id="win-stats"></div>
      <button id="play-again-btn" onclick="closeWin()">ğŸ® Play Again!</button>
    </div>
  </div>

  <script>
    // â”€â”€ Card pool (Bluey themed) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const ALL_CARDS = [
      'ğŸ’™','ğŸ§¡','ğŸ¾','ğŸˆ','â­','ğŸ ','ğŸ•','ğŸŒŸ',
      'ğŸµ','ğŸ¦´','ğŸŒˆ','ğŸ€','ğŸ¦','ğŸ†','ğŸ¯','ğŸŒ¸',
      'ğŸ¦‹','ğŸŒº','ğŸª','ğŸ¶','ğŸ ','ğŸ§¸','ğŸª€','ğŸ­',
    ];

    // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let cols = 4, rows = 4;
    let cards       = [];
    let flipped     = [];
    let matched     = 0;
    let moves       = 0;
    let locked      = false;
    let timerInterval = null;
    let seconds     = 0;
    let gameStarted = false;

    // â”€â”€ Difficulty â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function setDifficulty(c, r, btn) {
      document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      cols = c; rows = r;
      restartGame();
    }

    // â”€â”€ Build & shuffle deck â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function buildDeck() {
      const pairs = (cols * rows) / 2;
      const pool  = [...ALL_CARDS].slice(0, pairs);
      const deck  = [...pool, ...pool];
      // Fisher-Yates shuffle
      for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
      }
      return deck;
    }

    // â”€â”€ Render grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderGrid(deck) {
      const grid = document.getElementById('grid');
      grid.style.gridTemplateColumns = `repeat(${cols}, auto)`;
      grid.innerHTML = '';
      cards = [];

      deck.forEach((emoji, i) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.index = i;
        card.dataset.emoji = emoji;
        card.innerHTML = `
          <div class="card-inner">
            <div class="card-back"></div>
            <div class="card-front">${emoji}</div>
          </div>`;
        card.addEventListener('click', () => onCardClick(card));
        grid.appendChild(card);
        cards.push(card);
      });
    }

    // â”€â”€ Card click â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function onCardClick(card) {
      if (locked) return;
      if (card.classList.contains('flipped') || card.classList.contains('matched')) return;

      // Start timer on first click
      if (!gameStarted) {
        gameStarted = true;
        timerInterval = setInterval(tickTimer, 1000);
      }

      card.classList.add('flipped');
      flipped.push(card);

      if (flipped.length === 2) {
        locked = true;
        moves++;
        document.getElementById('moves-count').textContent = moves;
        checkMatch();
      }
    }

    function checkMatch() {
      const [a, b] = flipped;
      if (a.dataset.emoji === b.dataset.emoji) {
        // Match!
        setTimeout(() => {
          a.classList.add('matched');
          b.classList.add('matched');
          matched++;
          document.getElementById('match-count').textContent = matched;
          flipped = [];
          locked  = false;
          if (matched === (cols * rows) / 2) {
            setTimeout(showWin, 400);
          }
        }, 300);
      } else {
        // No match â€” shake and flip back
        a.classList.add('wrong');
        b.classList.add('wrong');
        setTimeout(() => {
          a.classList.remove('flipped','wrong');
          b.classList.remove('flipped','wrong');
          flipped = [];
          locked  = false;
        }, 900);
      }
    }

    // â”€â”€ Timer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function tickTimer() {
      seconds++;
      const m = Math.floor(seconds / 60);
      const s = String(seconds % 60).padStart(2, '0');
      document.getElementById('timer').textContent = `${m}:${s}`;
    }

    function stopTimer() {
      clearInterval(timerInterval);
      timerInterval = null;
    }

    // â”€â”€ Win screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function showWin() {
      stopTimer();
      const m = Math.floor(seconds / 60);
      const s = String(seconds % 60).padStart(2, '0');
      const stars = moves <= (cols * rows) * 0.8 ? 'â­â­â­' : moves <= (cols * rows) * 1.2 ? 'â­â­' : 'â­';
      document.getElementById('win-stats').textContent =
        `${stars}  ${moves} moves  â€¢  ${m}:${s}`;
      document.getElementById('win-screen').classList.add('show');
      spawnConfetti();
    }

    function closeWin() {
      document.getElementById('win-screen').classList.remove('show');
      restartGame();
    }

    // â”€â”€ Confetti â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const CONFETTI_COLORS = ['#FFE066','#1B6CA8','#E8622A','#6DD46D','#FF6B9D','#A78BFA'];
    function spawnConfetti() {
      for (let i = 0; i < 80; i++) {
        setTimeout(() => {
          const el = document.createElement('div');
          el.className = 'confetti';
          el.style.left = Math.random() * 100 + 'vw';
          el.style.top  = '-12px';
          el.style.background = CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)];
          el.style.width  = (8 + Math.random() * 8) + 'px';
          el.style.height = (8 + Math.random() * 8) + 'px';
          el.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
          el.style.animationDuration = (1.5 + Math.random() * 2) + 's';
          el.style.animationDelay = '0s';
          document.body.appendChild(el);
          setTimeout(() => el.remove(), 4000);
        }, i * 30);
      }
    }

    // â”€â”€ Restart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function restartGame() {
      stopTimer();
      seconds     = 0;
      moves       = 0;
      matched     = 0;
      flipped     = [];
      locked      = false;
      gameStarted = false;
      document.getElementById('moves-count').textContent = '0';
      document.getElementById('match-count').textContent = '0';
      document.getElementById('total-pairs').textContent = (cols * rows) / 2;
      document.getElementById('timer').textContent       = '0:00';
      document.getElementById('win-screen').classList.remove('show');
      renderGrid(buildDeck());
    }

    // â”€â”€ Init â”€ï¿½ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    restartGame();
  </script>
</body>
</html>
